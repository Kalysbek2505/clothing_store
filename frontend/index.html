<!DOCTYPE html>
<html lang="en">
  <head>
    <title>NoorWear — Мусульманская одежда</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="fonts/icomoon/style.css" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/jquery-ui.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="css/style.css" />

    <!-- Mobile-specific styles -->
    <style>
      @media (max-width: 576px) {
        /* Уменьшаем отступы и размеры шрифтов для телефонов */
        .site-navbar {
          padding: 10px 0;
        }
        .logo .site-logo a {
          font-size: 20px;
        }
        .site-menu li a {
          font-size: 14px;
          padding: 8px 10px;
        }
        .site-blocks-cover h1 {
          font-size: 28px;
        }
        .site-blocks-cover h2 {
          font-size: 20px;
        }
        .site-blocks-cover p, .site-block-cover-content p {
          font-size: 16px;
        }
        .position-absolute {
          padding: 15px;
        }
        /* Пример адаптации изображений */
        img {
          max-width: 100%;
          height: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="site-wrap">
      <!-- ==================== NAVBAR ==================== -->
      <div class="site-navbar bg-white py-2">
        <div class="search-wrap">
          <div class="container">
            <a href="#" class="search-close js-search-close"><span class="icon-close2"></span></a>
            <form action="#" method="post">
              <input type="text" class="form-control" placeholder="Search keyword and hit enter..." />
            </form>
          </div>
        </div>

        <div class="container">
          <div class="d-flex align-items-center justify-content-between">
            <div class="logo">
              <div class="site-logo">
                <a href="index.html" class="js-logo-clone">ShopMax</a>
              </div>
            </div>
            <div class="main-nav d-none d-lg-block">
              <nav class="site-navigation text-right text-md-center" role="navigation">
                <ul class="site-menu js-clone-nav d-none d-lg-block">
                  <li class="has-children active">
                    <a href="index.html">Home</a>
                    <ul class="dropdown">
                      <li><a href="#">Menu One</a></li>
                      <li><a href="#">Menu Two</a></li>
                      <li><a href="#">Menu Three</a></li>
                      <li class="has-children">
                        <a href="#">Sub Menu</a>
                        <ul class="dropdown">
                          <li><a href="#">Menu One</a></li>
                          <li><a href="#">Menu Two</a></li>
                          <li><a href="#">Menu Three</a></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li><a href="shop.html">Shop</a></li>
                  <li><a href="#">Catalogue</a></li>
                  <li><a href="#">New Arrivals</a></li>
                  <li><a href="contact.html">Contact</a></li>
                </ul>
              </nav>
            </div>
            <div class="icons">
              <a href="#" class="icons-btn d-inline-block js-search-open"><span class="icon-search"></span></a>
              <a href="#" class="icons-btn d-inline-block"><span class="icon-heart-o"></span></a>
              <a href="cart.html" class="icons-btn d-inline-block bag">
                <span class="icon-shopping-bag"></span>
                <span class="number">2</span>
              </a>
              <a href="#" class="site-menu-toggle js-menu-toggle ml-3 d-inline-block d-lg-none"><span class="icon-menu"></span></a>
            </div>
          </div>
        </div>
      </div>
      <!-- ==================== HERO ==================== -->
      <div class="site-blocks-cover" data-aos="fade" id="hero-banner-container">
        <div class="container">
          <div class="row">
            <div class="col-md-6 ml-auto order-md-2 align-self-start">
              <div class="site-block-cover-content">
                <h1 id="hero-title">Весна 2025</h1>
                <p><a href="#" class="btn btn-black rounded-0" id="hero-link">Купить</a></p>
              </div>
            </div>
            <div class="col-md-6 order-1 align-self-end">

              <img src="images/model_5.png" alt="Hero Banner Image" class="img-fluid" id="hero-image" />
            </div>
          </div>
        </div>
      </div>

      <!-- ==================== CATEGORIES (MEN & WOMEN) ==================== -->
      <section class="site-section py-2" id="categories">
        <div class="container-fluid px-0">
          <div class="row gx-0">
            <!-- WOMEN BLOCK -->
            <div class="col-md-6 pe-1">
              <div class="position-relative overflow-hidden" style="height:520px;">
                <img src="images/model_4.png" class="w-100 h-100 object-fit-cover" alt="Женская коллекция" />
                <div class="position-absolute text-white p-5 d-flex flex-column justify-content-center" style="top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);">
                  <h2 class="text-uppercase fw-bold">Женская коллекция</h2>
                  <p class="mb-4" style="max-width:320px;">Современная женская мусульманская одежда из натуральных материалов.</p>
                  <a href="women.html" class="btn btn-outline-light align-self-start">Выбрать</a>
                </div>
              </div>
            </div>
            <!-- MEN BLOCK -->
            <div class="col-md-6">
              <div class="position-relative overflow-hidden" style="height:520px;">
                <img src="images/model_5.png" class="w-100 h-100 object-fit-cover" alt="Мужская коллекция" />
                <div class="position-absolute text-white p-5 d-flex flex-column justify-content-center" style="top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);">
                  <h2 class="text-uppercase fw-bold">Мужская коллекция</h2>
                  <p class="mb-4" style="max-width:320px;">Современная мужская мусульманская одежда из натуральных материалов.</p>
                  <a href="men.html" class="btn btn-outline-light align-self-start">Выбрать</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ==================== ABOUT US ==================== -->
      <section class="site-section p-0" id="about" style="background:url('images/about_1.jpg') center/cover no-repeat;">
        <div class="container py-5" data-aos="fade-up">
          <div class="row no-gutters justify-content-center">
            <div class="col-lg-10 bg-white shadow p-5">
              <div class="row align-items-center">
                <div class="col-md-6 mb-4 mb-md-0 text-center text-md-left">
                  <img src="images/ansari3.kg_.png" alt="NoorWear" style="max-width:240px;" />
                  <p class="text-muted mt-3">Мусульманская одежда фабричного качества</p>
                  <p>Основанный в 2010 году бренд <strong>NoorWear</strong> создаёт современные и скромные коллекции для мусульман, сочетая натуральные ткани и качественный пошив.</p>
                  <a href="#" class="btn btn-black rounded-0 mt-2">Подробнее</a>
                </div>
                <div class="col-md-6 ps-1 text-center text-md-left">
                  <h3 class="text-uppercase mb-3">О компании</h3>
                  <span class="icon-home" style="font-size:48px; color:#333;"></span>
                  <p class="mt-3">Мы ведущий производитель женской и мужской мусульманской одежды в регионе. Высокое качество материалов, уникальный дизайн и бережное отношение к традициям — наша визитная карточка.</p>
                  <a href="shop.html" class="btn btn-outline-dark mt-2">Каталог</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ==================== FOOTER ==================== -->
      <footer>
        <div class="position-relative text-center py-4" style="background:#000;">
          <p class="mb-2 text-white">© 2025 NOORWEAR. Все права защищены</p>
          <div class="d-flex justify-content-center">
            <a href="https://wa.me/77001234567" target="_blank" class="mx-3 text-white" style="font-size:28px;">
              <span class="icon-whatsapp"></span>
            </a>
            <a href="https://instagram.com/noorwear" target="_blank" class="mx-3 text-white" style="font-size:28px;">
              <span class="icon-instagram"></span>
            </a>
          </div>
        </div>
      </footer>

      <script src="/js/jquery-3.3.1.min.js"></script>
      <script src="/js/jquery-ui.js"></script>
      <script src="/js/popper.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
      <script src="/js/owl.carousel.min.js"></script>
      <script src="/js/jquery.magnific-popup.min.js"></script>
      <script src="/js/aos.js"></script>

    <!-- Логика шаблона (инициализирует AOS, карусели и т.д.) -->
      <script src="/js/template.js"></script>

    <!-- Ваш main.js с import-ами и fetch-ом -->
      <script type="module" src="/js/main.js"></script>

    <!-- Настройка AOS и загрузка баннера после полной отрисовки DOM -->
      <script src="/js/jquery-3.3.1.min.js"></script>
      <script src="/js/jquery-ui.js"></script>
      <script src="/js/popper.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
      <script src="/js/owl.carousel.min.js"></script>
      <script src="/js/jquery.magnific-popup.min.js"></script>
      <script src="/js/aos.js"></script>
      <script src="/js/template.js"></script>
      <script type="module" src="/js/main.js?t=1745935687778"></script>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
       // Инициализируем анимации (возможно, лучше после загрузки данных, если они влияют на элементы)
       // AOS.init({ duration: 800, easing: 'slide', once: true }); 
        });
      </script>

      {/* */}
      <script type="module">
      // Используем ПОЛНЫЙ URL к Django API
        const bannerApiUrl = 'http://127.0.0.1:8000/backend/api/banners/?slug=main-hero&is_active=true';

        const heroContainer = document.getElementById('hero-banner-container');
        const heroTitle     = document.getElementById('hero-title');
        const heroLink      = document.getElementById('hero-link');
        const heroImage     = document.getElementById('hero-image');

        const hideBanner = () => {
          if(heroContainer) {
            heroContainer.style.display = 'none';
            console.warn("Главный баннер скрыт из-за ошибки загрузки или отсутствия данных.");
          }
        };

        if (heroContainer && heroTitle && heroLink && heroImage) {
          fetch(bannerApiUrl)
            .then(response => {
            // Улучшенная проверка: статус ОК и Content-Type содержит application/json
              if (!response.ok) {
                throw new Error(`Ошибка сети или сервера: ${response.status}`);
              }
              const contentType = response.headers.get('content-type');
              if (!contentType || !contentType.includes('application/json')) {
                // Если Content-Type не JSON, читаем как текст, чтобы увидеть ошибку
                return response.text().then(text => {
                  throw new Error(`Ожидался JSON, но получен не JSON (${contentType}). Ответ: ${text.substring(0, 100)}...`);
                });
              }
              return response.json(); // Теперь мы уверены, что это JSON
            })
            .then(data => {
              if (data && Array.isArray(data.results) && data.results.length > 0) {
                const banner = data.results[0];

                if (banner.title && banner.link && banner.image_url) {
                  heroTitle.textContent = banner.title;
                  heroLink.href = banner.link;
                  heroImage.src = banner.image_url; // URL уже абсолютный от сериализатора
                  heroImage.alt = banner.title;
                  heroContainer.style.display = ''; // Показываем контейнер
                  // Инициализируем AOS здесь, если нужно анимировать сам баннер
                  // AOS.init({ duration: 800, easing: 'slide', once: true }); 
                } else {
                  console.warn("Получены данные баннера, но не все поля (title, link, image_url) заполнены.");
                  hideBanner();
                }
              } else {
                console.warn("Активный баннер с slug 'main-hero' не найден.");
                hideBanner();
              }
            })
            .catch(error => {
              console.error('Ошибка загрузки главного баннера:', error);
              hideBanner();
            });
        } else {
          console.error('Не найдены все необходимые HTML элементы для Hero баннера.');
          if(heroContainer) heroContainer.style.display = 'none';
        }
      </script>


    </body>
  </html>